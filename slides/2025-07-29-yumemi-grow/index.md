---
marp: true
paginate: true
theme: blue-standard
title: AIコードチェックが面倒すぎるのでテスト駆動開発で解決しようとして読んだら、根本的に俺の勘違いだった
description: 2025-07-29 | 読書シェア会 vol.7
author: 梶原睦
---

<!-- _class: cover -->

## AI コードチェックが面倒すぎるのでテスト駆動開発で解決しようとして読んだら、根本的に俺の勘違いだった

## 読書シェア会 vol.7

---

<!-- _class: section-title -->

# AI コーディング、やってますか？

---

<!--
footer: 読書シェア会 vol.7 | AI コードチェックが面倒すぎるのでテスト駆動開発で解決しようとして読んだら、根本的に俺の勘違いだった（ムツミックス）
-->

# AI コーディング、やってますか？

- AI（ChatGPT、Claude 等）にコード書かせる
- 一部のコーディング補助から完全実装まで
- 結果だけチェック
- めちゃくちゃ楽だけど...

---

# AI コーディングの現実

<!-- ![bg right:40% 90%](https://via.placeholder.com/400x300/ff6b6b/ffffff?text=AI+Code) -->

- **最初は順調**
- **だんだん方向性がずれてくる**
- **気づいたら修正不可能な状態**
- 「AI のコードを目 Grep は面倒だし...」

---

# 何か良い方法はないものか？

- 「テストを都度挟めば、ずれを修正できるのでは？」
- 「よし、AI にテストを書かせよう」

### プロンプト：

```
まずテストを書いて、それを突破するように実装して
```

---

# 結果

```javascript
// AIが生成したテスト
describe("UserService", () => {
  it("should create user", () => {
    const mockDb = jest.fn();
    const mockValidator = jest.fn();
    // TODO: implement this test
    expect(true).toBe(true); // とりあえず通る
  });
});
```

- 結果：モックだらけ、重要な部分がコメントアウト、何をテストしているか不明
  **こんなの受け入れていいのか？**

---

<!-- _class: section-title -->

# よし、テストについての本を読もう

---

# ケント・ベック『テスト駆動開発』

![bg right:25% 80%](./image/tdd.png)

**3 部構成：**

- 第 1 部：貨幣の例（多通貨対応の金額計算）
- 第 2 部：xUnit の例
  - テスティングフレームワーク構築
- 第 3 部：パターンとリファクタリング

## 「テストについてちゃんと学んで、効果的なテストの書き方を学ぶぞ」

<!-- **レッド・グリーン・リファクタサイクル** -->

---

# 印象に残ったページ
> 「恐怖は開発を麻痺させる。恐怖があると、明確に考えることができず、他の人とのコミュニケーションもうまくいかず、フィードバックも避けてしまう。」
> 
### わかる


> 効果: TDD が単なるテスト手法ではなく、開発者の心理的状態を改善する手法だと明確に示せる

--- 
<br><br>

> 「TDD の目的は完璧なテストを書くことではない。恐怖を管理することだ。」

>  常に動作するコードを維持するという価値観を強調できる
##  →TDDは品質担保にとどまらず、開発者の不安を軽減する開発哲学

---

# 読んでみた結果

## 「あれ、これテストの書き方の本じゃない...？」

### TDD の本質：

- ❌ テスト設計手法
- ⭕ **プログラミング中の不安を取り除く思考法**

---

# テスト駆動開発のサイクル（リズム）


<br>

1. まずはテストを一つ書く
2. 全てのテストを走らせ、新しいテストの失敗を確認する
3. 小さな変更を行う
4. 全てのテストを走らせ、全て成功することを確認する
5. リファクタリングを行なって重複を除去する

このサイクルに従って、第1章ではある金融システムの多通貨対応の金額計算を実装していく
**著者の思考をトレースしたような進め方で、まるでケントベックの隣に座ってペアプログラミングしているような気分になれる**
こんなにゆっくりで大丈夫か？と思えるような進め方ですが、実際にはそれほど時間はかかりません

---


# TDD の真の価値
## 核心は **心理的安全性**

- 小さなステップで確実に前進
- 常に動作するコードを維持
- 複雑さをコントロール
- **開発者の不安を軽減**

---
<!-- _class: section-title -->

# 根本的に俺の勘違いだった

---
# 根本的な勘違いに気づいた

## Before (勘違い)

- **問題：** AI コードのチェックが面倒
- **最初の試み：** AI にテストを書かせる → **失敗**
- **期待した解決策：** テストで品質担保

## After (理解)

- **実際の TDD：** 開発プロセス自体の改善
---

<!-- _class: section-title -->

# これからのAIコーディングへの応用可能性は？

---

# 最近のKent Beck氏の発言

> 人間の役割は良いコードは何かをAIに教える人へ
> - podcast


---
# TDD を AI コーディングに応用するなら

## ❌ 間違ったアプローチ

<br><br>

```
いい感じにテストを作って
```

## とAIに指示

---

## ⭕ 正しいアプローチ

```
「小さな実装→TODOリスト→逐次消化」をAIに指示
```
- 方向性のずれを小さなうちに修正
- ゴールに向けた確実な前進

---

ここでもう一つ引用
t-wadaさんのTDDの記事

仕様や設計を見つけるよくしていく過程がTDD
細部を作りながら、全体の設計にフィードバックしていく過程が重要

翻訳者和田卓人（t-wada）さんのAIに対する発言

「問題の構造は変わらず、顕在化までの時間が圧倒的に短くなっただけなんです」

---

## 最初から大きななゴールを目指さないアプローチ（バイブコーディングの醍醐味は失われるが）

---

# 実際のプロンプト例
## 僕の考えた最強のTDDプロンプト

```
以下の手順で実装してください：

1. 最終ゴールを明確にする
2. 現在の状態から次の小さなステップを定義
3. そのステップだけを実装
4. 動作確認
5. 次のTODOを提示
6. 2-5を繰り返し

各ステップは15分以内で完了できるサイズにしてください。
実装前に必ず「今から何をするか」を説明してください。
```
---

# サイクルの図解

まずはドキュメントを書く
README.mdにプロジェクトの概要を書く
DESIGN.mdに設計を書く
TODO.mdにTODOリストを書く

メソッド単位のタスクに分解
テストを作成する
実装


Red Green Refactoring commit 繰り返し
README.md, DESIGN.md, TODO.md を更新

細かくコミットをする、ドキュメントを残し適宜参照させることで、AIの記憶喪失（コンテキストウィンドウ切れ）を防ぐ

既存のコードを修正する場合はまた違ったアプローチ

---

# 学んだこと + 次のアクション

## 学んだこと

- **本を読む前の思い込みの危険性**
- **TDD は「テスト手法」ではなく開発者の不安を軽減する「開発哲学」**
- **AIコーディング にもこの開発プロセスを適用できる可能性**
（方向性のずれ）を早めに修正



## 次のアクション

- この手法で実際にプロジェクトを試して効果を検証
- **xUnit の実装の章を書籍に従って写経**
- 一つのシステムを継続して維持・発展させるための手法について書かれた、和田卓人さんも推薦の「ソフトウェアエンジニアリング」を読む

---

<!-- _class: title -->

おまけ
今回のスライドの作成自体も、AI の支援を受けた
書籍を読もうとしたきっかけ
書籍を読んで何を得たか
これから何をしたいか


# ありがとうございました！

**質問・ディスカッションをお待ちしています**

Twitter や GitHub でも気軽にお声かけください
[@your_handle]

最後に独り言

バイブコーディングの「寝てる間に良いコードができていた」は人間にとって甘い誘惑
しかし、一番重要なことを AI に任せると、その人はAIに代替される人材に自らなりにいっているようなもの
AIとは添い寝をするのではなく対話をする。自分の能力を拡張してくれる存在と捉える